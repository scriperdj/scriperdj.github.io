<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1" />
  <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
  <title>Settingup environment for test driven development(TDD) of client side javascript using Mocha, Karma and Watchify</title>
  <link rel="shortcut icon" href="favicon.ico">
  <meta name="description" content="Developing Javascript application is a breeze. It has no strict type checks (loose typing), vast libraries to use from, no need of setting up development env...">
  <!-- Google Font-->
  <link href='http://fonts.googleapis.com/css?family=Roboto:400,300italic,300,100italic,100,400italic,500,500italic,700,900,900italic,700italic%7COswald:400,300,700' rel='stylesheet' type='text/css'>
  <!-- Design Style -->
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <link rel="stylesheet" type="text/css" href="/css/carousel.css">
  <!-- Icon -->
  <link rel="stylesheet" type="text/css" href="/css/font-awesome.css" />
  <!-- Responsive -->
  <link rel="stylesheet" type="text/css" href="/css/responsive.css" />
  <!-- Pygments -->
  <link rel="stylesheet" type="text/css" href="/css/monokai.css" />
  <script type="text/javascript" src="/js/jquery-2.0.3.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-79509088-1', 'auto');
    ga('send', 'pageview');

  </script>
</head>

  <body class="blog">
    <div id="container" class="container">
      <!-- Left Menu / Logo-->
      <aside class="menu" id="menu">
  <div class="logo">
    <!-- Logo image-->
    <img src="/images/logo.png" width="140" height="140" alt=""/>
    <!-- Logo name-->
    <span>Sathish Jayaraman</span>
  </div>
  <!-- Mobile Navigation-->
  <a href="#menu1" class="menu-link"></a>
  <!-- Left Navigation-->
  <nav id="menu1" role="navigation">
    <a href="/index.html?page=about">
      <span class="active" id="link_about">About</span>
    </a>
    <a href="/index.html?page=skills">
      <span id="link_skills">Skills</span>
    </a>
    <a href="/index.html?page=experience">
      <span id="link_experience">Experience</span>
    </a>
    <a href="/index.html?page=education">
      <span id="link_education">Education</span>
    </a>
    <a href="/index.html?page=contact">
      <span id="link_contact">Contact</span>
    </a>
    <a href="/blog">
      <span id="link_blog">Blog</span>
    </a>
  </nav>
  <div class="copyright">
     &copy; Sathish Jayaraman.<br>
     All Rights Reserved.<br><br>
     <!-- <center>Powered by <img src="/images/jekyll.png" width="80" alt=""/></center> -->
  </div>

</aside>

      <div class="blog-main">
        <div class="blog-left">
          <div class="blog-title blog-details-title">
            <h2>Settingup environment for test driven development(TDD) of client side javascript using Mocha, Karma and Watchify</h2>
            <div class="breadcrumbs"><a href="/index.html?page=about">Home</a>&nbsp;&nbsp;/&nbsp;&nbsp;<a href="/blog">Blog</a>&nbsp;&nbsp;/&nbsp;&nbsp;Settingup environment for test driven development(TDD) of client side javascript using Mocha, Karma and Watchify</div>
            <span class="post-details ">Saturday &nbsp;/&nbsp; 08 April 2017 &nbsp;/&nbsp; <a href="#"></a></span>
          </div>
          <p>Developing Javascript application is a breeze. It has no strict type checks (loose typing), vast libraries to use from, no need of setting up development environment, can run anywhere, and more and more. But things could get messy pretty soon if you are constantly deveolping it adding logics day by day.</p>

<p>Very soon, the application grows ugly and maintaining it becomes painful task. Here is a great tutorial on <a href="https://fluxusfrequency.github.io/blog/2015/02/04/setting-up-a-client-side-javascript-project-with-gulp-and-browserify/" target="_blank">setting up client side javascript project using gulp</a>.</p>

<h5 id="javascript-unit-testing">Javascript Unit testing</h5>

<p>There are multiple testing frameworks out there and I prefer <a href="http://mochajs.org/" target="_blank">Mocha</a> and <a href="http://chaijs.com" target="_blank">Chai</a> as I feel its more expressive.</p>

<p>Below is a simple function to generate object with query string of given url,</p>

<script src="http://gist-it.appspot.com/https://github.com/scriperdj/Javascript-automated-unit-testing-with-browsers/blob/master/src/helpers.js?slice=69:86"></script>

<p>And a simple test case for it,</p>

<script src="http://gist-it.appspot.com/https://github.com/scriperdj/Javascript-automated-unit-testing-with-browsers/blob/master/test/helpers.test.js?slice=26:45"></script>

<p>You can run this test with Mocha with below command,</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>mocha <span class="nt">--compilers</span> js:babel-core/register</code></pre></figure>

<p>But client side javascript involves Dom. You could very well install <a href="https://github.com/rstacruz/jsdom-global" target="_blank">jsdom-global</a> to solve document dependencies in your functions and test them. Thats ok, but what if we want to test using real browsers &amp; multiple devices?</p>

<h5 id="real-browser-testing-using-karma">Real browser testing using karma</h5>

<p><a href="http://karma-runner.github.io/1.0/index.html" target="_blank">Karma</a> is a test runner which runs the test cases in real browsers and across devices. Sounds awesome doesnâ€™t it? Setting it up is also straight forward which is very well explained in their main website.</p>

<p>After installing &amp; configuring, you can install the <a href="http://karma-runner.github.io/1.0/config/browsers.html" target="_blank">browser launchers</a> you need and update the config file.</p>

<p>Now run the command to start karma, It will open the configured browsers and execute the test cases in all.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>./node_modules/.bin/karma start karma.conf.js <span class="nt">--log-level</span> debug <span class="nt">--single-run</span></code></pre></figure>

<h5 id="connect-multiple-devices--auto-execute-test-cases-when-code-changes">Connect multiple devices &amp; auto execute test cases when code changes</h5>

<p>The cool part about Karma is that, you could start it and add any device to it and the test cases gets autmatically executed for that device. You can see below, I added my Android phone to the running test just by opening the url in my mobile browser.</p>

<p><img src="/images/posts/karma-testing.gif" alt="Read JioMags" /></p>

<p>Set <em>autoWatch: true</em> in <strong><em>karma.config.js</em></strong> file to allow test cases execution whenever the files change. Also, you could debug the code by adding a line <strong><em>debugger</em></strong> to four function &amp; open Developer tools in your browser to start debugger. Exciting right? Go ahead &amp; try for yourself.</p>

<p>Have setup <a href="https://github.com/scriperdj/Javascript-automated-unit-testing-with-browsers" target="_blank">boilerplate in Git repo</a> with some Gulp tasks to get you started.</p>

          <div id="comments" class="comments-main">
            
              <div id="disqus_thread"></div>
              <script>

                /**
                *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
                /*
                var disqus_config = function () {
                this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };
                */
                (function() { // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                s.src = '//sathish-me.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
              </script>
              <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
              <!-- <div id="fb-root"></div>
              <script>(function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=612519132273800";
                fjs.parentNode.insertBefore(js, fjs);
              }(document, 'script', 'facebook-jssdk'));</script>
              <div class="fb-comments" data-href="http://sathish.me/javascript/2017/04/08/Settingup-environment-for-test-driven-development-of-client-side-javascript-using-mocha-and-karma.html" data-numposts="5"></div> -->
            
          </div>
        </div>
        <!-- <div class="blog-right">

  <div class="sidebar-block">
    <h3>Categories</h3>
    <ul>
      <li><a href="#">Web Design</a><span class="pull-right">48</span></li>
      <li><a href="#">Featured Blog</a><span class="pull-right">66</span></li>
      <li><a href="#">Photography Idea</a><span class="pull-right">32</span></li>
      <li><a href="#">Design Tutorials</a><span class="pull-right">16</span></li>
      <li><a href="#">News and Events</a><span class="pull-right">25</span></li>
      <li><a href="#">Arts and Entertainment</a><span class="pull-right">38</span></li>
    </ul>
  </div>
  <div class="sidebar-block">
    <h3>Tags Cloud</h3>
    <div class="tagcloud"> <a href="javascript:void(0)">Advertisement</a> <a href="javascript:void(0)">Fashion</a> <a href="javascript:void(0)">Forest</a> <a href="javascript:void(0)">Nature</a> <a href="javascript:void(0)">Photo</a> <a href="javascript:void(0)">Portrait</a> <a href="javascript:void(0)">Sea</a> <a href="javascript:void(0)">Sky</a> <a href="javascript:void(0)">Wordpress</a> </div>
  </div>

</div>
 -->
      </div>
    </div>
    <!-- Portfolio Slider-->
<script type="text/javascript" src="/js/carousel.js"></script>
<script type="text/javascript" src="/js/settings-blog.js"></script>
<script>
$(document).ready(function(){
  $('#link_blog').addClass("active")
  $('#link_about').removeClass('active');
});
</script>

  </body>
</html>
